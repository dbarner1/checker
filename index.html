<html>
  <script>
const urls = [ 'http://localhost:8010/proxy/clinic/search?q[services_name_in][]=Vaccination&q[age_groups_name_in][]=Seniors&q[venue_search_name_or_venue_name_i_cont]=&q[clinic_date_gteq]=&q[vaccinations_name_i_cont]=&location=02052&search_radius=All&commit=Search&page=1#search_results',
  'http://localhost:8010/proxy/clinic/search?q[services_name_in][]=Vaccination&q[age_groups_name_in][]=Seniors&q[venue_search_name_or_venue_name_i_cont]=&q[clinic_date_gteq]=&q[vaccinations_name_i_cont]=&location=02052&search_radius=All&commit=Search&page=2#search_results',
  'http://localhost:8010/proxy/clinic/search?q[services_name_in][]=Vaccination&q[age_groups_name_in][]=Seniors&q[venue_search_name_or_venue_name_i_cont]=&q[clinic_date_gteq]=&q[vaccinations_name_i_cont]=&location=02052&search_radius=All&commit=Search&page=3#search_results'
]

function process(data) {
  const newData = data.replace(':', 'WANKY').split('<')    
    newData.forEach((item, index) => {
      if(item.includes('Available Appointments')) {
        if(newData[index+1] === '/strong> 0') {
          const name = newData[index-25].replace('p class="text-xl font-black">', '');
          const numAppointments = newData[index+1].replace('/strong>', '');
          console.log(name)
          console.log("      Appointments: ", numAppointments)
          console.log("      http://t.ly/0dO6")
          console.log("     ");

        } else {
          console.log(newData[index+1]);
        } 
      }
    })
}

urls.forEach(url => {
  fetch(url)
  .then(function(response) {
    return response.text();
  }).then(function(data) {
    process(data);
  });
})




</script>
</html> 